<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador de Redes Neuronales</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .section {
            display: none;
            animation: slideIn 0.5s ease-in-out;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            color: #FFD700;
            font-size: 2em;
            margin: 20px 0;
            text-align: center;
        }
        
        .neuron-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .neuron {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle, #FFD700, #FFA500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 10px;
            border: 3px solid #fff;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .neuron:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
        }
        
        .neuron.active {
            background: radial-gradient(circle, #00FF00, #32CD32);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .connection {
            height: 4px;
            background: #ccc;
            margin: 0 10px;
            border-radius: 2px;
            transition: all 0.5s ease;
            min-width: 50px;
            position: relative;
            overflow: hidden;
        }
        
        .connection.strong {
            background: #00FF00;
            box-shadow: 0 0 10px #00FF00;
        }
        
        .connection.weak {
            background: #FF6B6B;
            box-shadow: 0 0 10px #FF6B6B;
        }
        
        .connection::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }
        
        .connection.active::after {
            left: 100%;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .slider-group {
            margin: 15px 0;
        }
        
        .slider-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            margin: 10px 0;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FFD700;
            cursor: pointer;
            border: 2px solid #fff;
        }
        
        .empanada-example {
            background: rgba(255, 165, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #FFA500;
        }
        
        .result-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-size: 1.2em;
            text-align: center;
        }
        
        .btn {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            color: #333;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .canvas-area {
            background: white;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        
        #drawCanvas {
            border: 2px solid #333;
            border-radius: 10px;
            cursor: crosshair;
        }
        
        .progress-bar {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #00FF00, #32CD32);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .explanation-box {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #FFD700;
        }
        
        .navigation {
            text-align: center;
            margin: 30px 0;
        }
        
        @media (max-width: 768px) {
            .neuron-visual {
                flex-direction: column;
            }
            
            .connection {
                width: 4px;
                height: 30px;
                min-width: auto;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            .container { padding: 15px; }
        }
        
        .layer {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 20px;
        }
        
        .layer-label {
            font-size: 0.9em;
            margin-bottom: 10px;
            color: #FFD700;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† ¬°Descubre las Redes Neuronales! ü§ñ</h1>
        
        <!-- Secci√≥n 1: ¬øQu√© es una neurona? -->
        <div class="section active" id="section1">
            <h2>üî• ¬øQu√© es una Neurona Artificial?</h2>
            
            <div class="explanation-box">
                <p>¬°Imag√≠nate que una neurona es como un amigo s√∫per inteligente que puede tomar decisiones!</p>
                <p>üëÇ <strong>Escucha:</strong> Recibe informaci√≥n de sus amigos</p>
                <p>ü§î <strong>Piensa:</strong> Procesa toda esa informaci√≥n</p>
                <p>üí¨ <strong>Decide:</strong> Da una respuesta o decisi√≥n</p>
            </div>
            
            <div class="neuron-visual">
                <div class="layer">
                    <div class="layer-label">Informaci√≥n que llega</div>
                    <div style="display: flex; flex-direction: column;">
                        <div class="neuron" onclick="activateNeuron('input1')">üå§Ô∏è</div>
                        <div class="neuron" onclick="activateNeuron('input2')">üïê</div>
                        <div class="neuron" onclick="activateNeuron('input3')">üìç</div>
                    </div>
                </div>
                
                <div class="connection" id="conn1"></div>
                <div class="connection" id="conn2"></div>
                <div class="connection" id="conn3"></div>
                
                <div class="layer">
                    <div class="layer-label">Neurona Pensante</div>
                    <div class="neuron" id="mainNeuron">üß†</div>
                </div>
                
                <div class="connection" id="outputConn"></div>
                
                <div class="layer">
                    <div class="layer-label">Decisi√≥n Final</div>
                    <div class="neuron" id="outputNeuron">‚ùì</div>
                </div>
            </div>
            
            <div class="explanation-box">
                <p><strong>¬°Prueba haciendo clic en las neuronas de entrada!</strong></p>
                <p>üå§Ô∏è = ¬øEst√° soleado? | üïê = ¬øQu√© hora es? | üìç = ¬øD√≥nde estamos?</p>
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="nextSection()">Siguiente: El Vendedor de Empanadas ü•ü</button>
            </div>
        </div>
        
        <!-- Secci√≥n 2: Ejemplo del vendedor de empanadas -->
        <div class="section" id="section2">
            <h2>ü•ü Juan el Vendedor de Empanadas</h2>
            
            <div class="explanation-box">
                <p><strong>Conoce a Juan:</strong> Vende empanadas en la calle y quiere saber cu√°nto cobrar seg√∫n sus ingredientes y d√≥nde est√° vendiendo.</p>
                <p>Su cerebrito artificial le va a ayudar a decidir el precio perfecto! üí∞</p>
            </div>
            
            <div class="empanada-example">
                <div class="controls">
                    <div class="slider-group">
                        <label>ü•© Cantidad de Carne (1-10):</label>
                        <input type="range" id="meat" min="1" max="10" value="5" oninput="updateEmpanada()">
                        <span id="meatValue">5</span>
                    </div>
                    
                    <div class="slider-group">
                        <label>üßÄ Cantidad de Queso (1-10):</label>
                        <input type="range" id="cheese" min="1" max="10" value="3" oninput="updateEmpanada()">
                        <span id="cheeseValue">3</span>
                    </div>
                    
                    <div class="slider-group">
                        <label>üìç Zona (1=Popular, 10=Exclusiva):</label>
                        <input type="range" id="zone" min="1" max="10" value="5" oninput="updateEmpanada()">
                        <span id="zoneValue">5 - Zona Media</span>
                    </div>
                </div>
                
                <div class="neuron-visual">
                    <div class="layer">
                        <div class="layer-label">Ingredientes + Zona</div>
                        <div class="neuron" id="meatNeuron">ü•©</div>
                        <div class="neuron" id="cheeseNeuron">üßÄ</div>
                        <div class="neuron" id="zoneNeuron">üìç</div>
                    </div>
                    
                    <div class="connection" id="meatConn"></div>
                    <div class="connection" id="cheeseConn"></div>
                    <div class="connection" id="zoneConn"></div>
                    
                    <div class="layer">
                        <div class="layer-label">Cerebrito de Juan</div>
                        <div class="neuron" id="juanBrain">ü§î</div>
                    </div>
                    
                    <div class="connection" id="priceConn"></div>
                    
                    <div class="layer">
                        <div class="layer-label">Precio Sugerido</div>
                        <div class="neuron" id="priceNeuron">üí∞</div>
                    </div>
                </div>
                
                <div class="result-display" id="empanadaResult">
                    üí∞ Precio sugerido: $2,500 pesos
                </div>
            </div>
            
            <div class="explanation-box">
                <p><strong>¬øC√≥mo funciona?</strong> La neurona de Juan toma los ingredientes y la zona, los "pesa" seg√∫n su importancia, y calcula el precio justo.</p>
                <p>¬°Mueve los controles y mira c√≥mo cambia el precio! üéÆ</p>
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="prevSection()">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="nextSection()">Siguiente: ¬øC√≥mo Aprende? üéì</button>
            </div>
        </div>
        
        <!-- Secci√≥n 3: Entrenamiento y Backpropagation -->
        <div class="section" id="section3">
            <h2>üéì ¬øC√≥mo Aprende una Red Neuronal?</h2>
            
            <div class="explanation-box">
                <p><strong>¬°Es como aprender a andar en bicicleta!</strong></p>
                <p>1Ô∏è‚É£ <strong>Intenta:</strong> La neurona da una respuesta</p>
                <p>2Ô∏è‚É£ <strong>Se equivoca:</strong> Compara con la respuesta correcta</p>
                <p>3Ô∏è‚É£ <strong>Ajusta:</strong> Cambia un poquito para mejorar</p>
                <p>4Ô∏è‚É£ <strong>Repite:</strong> ¬°Hasta que lo hace perfecto!</p>
            </div>
            
            <div class="controls">
                <h3>üè´ Entrenemos a Juan</h3>
                <p>Vamos a mostrarle ejemplos de empanadas y sus precios correctos:</p>
                
                <div class="empanada-example">
                    <div id="trainingExample">
                        <p><strong>Ejemplo 1:</strong> Carne: 8, Queso: 6, Zona Exclusiva ‚Üí Precio correcto: $4,000</p>
                    </div>
                    
                    <div class="result-display">
                        <p>Juan piensa que vale: <span id="juanGuess">$2,800</span></p>
                        <p>Error: <span id="error" style="color: #FF6B6B;">-$1,200</span></p>
                    </div>
                    
                    <button class="btn" onclick="trainStep()" id="trainBtn">üéØ ¬°Entrenar un paso!</button>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="learningProgress"></div>
                    </div>
                    <p style="text-align: center;">Progreso de aprendizaje: <span id="progressText">0%</span></p>
                </div>
            </div>
            
            <div class="explanation-box">
                <p><strong>¬°Esto es el "Backpropagation"!</strong> üîÑ</p>
                <p>Cuando Juan se equivoca, el error viaja hacia atr√°s por todas sus conexiones, dici√©ndoles: "¬°Ey, cambien un poquito para que la pr√≥xima vez sea mejor!"</p>
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="prevSection()">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="nextSection()">Siguiente: Muchas Neuronas üß†</button>
            </div>
        </div>
        
        <!-- Secci√≥n 4: Red Neuronal Completa -->
        <div class="section" id="section4">
            <h2>üß† Una Red Neuronal Completa</h2>
            
            <div class="explanation-box">
                <p><strong>¬°Ahora imagina muchas neuronas trabajando juntas!</strong></p>
                <p>Es como tener un equipo de amigos s√∫per inteligentes, cada uno especializado en algo diferente, pero todos colaborando para tomar la mejor decisi√≥n.</p>
            </div>
            
            <div class="neuron-visual" style="justify-content: space-around;">
                <div class="layer">
                    <div class="layer-label">Entrada</div>
                    <div class="neuron" onclick="activateNetwork('input')">üìä</div>
                    <div class="neuron" onclick="activateNetwork('input')">üìä</div>
                    <div class="neuron" onclick="activateNetwork('input')">üìä</div>
                </div>
                
                <div class="layer">
                    <div class="layer-label">Capa Oculta 1</div>
                    <div class="neuron hidden-neuron">üîç</div>
                    <div class="neuron hidden-neuron">üîç</div>
                    <div class="neuron hidden-neuron">üîç</div>
                    <div class="neuron hidden-neuron">üîç</div>
                </div>
                
                <div class="layer">
                    <div class="layer-label">Capa Oculta 2</div>
                    <div class="neuron hidden-neuron">üéØ</div>
                    <div class="neuron hidden-neuron">üéØ</div>
                    <div class="neuron hidden-neuron">üéØ</div>
                </div>
                
                <div class="layer">
                    <div class="layer-label">Salida</div>
                    <div class="neuron output-neuron">‚ú®</div>
                </div>
            </div>
            
            <button class="btn" onclick="demonstrateNetwork()" id="networkBtn">üöÄ ¬°Ver la red en acci√≥n!</button>
            
            <div class="explanation-box">
                <p><strong>¬øQu√© hacen las capas ocultas?</strong></p>
                <p>üîç <strong>Primera capa:</strong> Detecta patrones b√°sicos</p>
                <p>üéØ <strong>Segunda capa:</strong> Combina patrones para decisiones complejas</p>
                <p>‚ú® <strong>Salida:</strong> Da la respuesta final</p>
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="prevSection()">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="nextSection()">Siguiente: ¬°Reconoce Caras! üë¶üëß</button>
            </div>
        </div>
        
        <!-- Secci√≥n 5: Reconocimiento de caras -->
        <div class="section" id="section5">
            <h2>üë¶üëß ¬°Reconocimiento de Caras!</h2>
            
            <div class="explanation-box">
                <p><strong>¬°Ahora viene lo m√°s genial!</strong> üé®</p>
                <p>Vas a dibujar una cara s√∫per simple y nuestra red neuronal tratar√° de reconocerla.</p>
                <p>¬°Dibuja solo c√≠rculos para ojos, una l√≠nea para la boca, y ya ver√°s la magia!</p>
            </div>
            
            <div class="canvas-area">
                <div>
                    <canvas id="drawCanvas" width="300" height="300"></canvas>
                    <div style="text-align: center; margin-top: 10px;">
                        <button class="btn" onclick="clearCanvas()">üßΩ Borrar</button>
                        <button class="btn" onclick="recognizeFace()">üîç ¬°Reconocer!</button>
                    </div>
                </div>
            </div>
            
            <div class="result-display" id="recognitionResult">
                ü§ñ Dibuja una cara y presiona "¬°Reconocer!" para ver qu√© piensa la red neuronal
            </div>
            
            <div class="neuron-visual" style="margin-top: 30px;">
                <div class="layer">
                    <div class="layer-label">Tu Dibujo</div>
                    <div class="neuron">üé®</div>
                </div>
                
                <div class="connection" id="faceConn1"></div>
                
                <div class="layer">
                    <div class="layer-label">Detectores</div>
                    <div class="neuron face-detector" title="Detector de ojos">üëÅÔ∏è</div>
                    <div class="neuron face-detector" title="Detector de boca">üëÑ</div>
                    <div class="neuron face-detector" title="Detector de forma">‚≠ï</div>
                </div>
                
                <div class="connection" id="faceConn2"></div>
                
                <div class="layer">
                    <div class="layer-label">¬øEs una cara?</div>
                    <div class="neuron" id="faceResult">‚ùì</div>
                </div>
            </div>
            
            <div class="explanation-box">
                <p><strong>¬øC√≥mo funciona el reconocimiento?</strong></p>
                <p>üëÅÔ∏è Busca formas redondas (ojos)</p>
                <p>üëÑ Busca l√≠neas horizontales (boca)</p>
                <p>‚≠ï Verifica que todo est√© en posici√≥n de cara</p>
                <p>¬°Si encuentra estos patrones, dice "¬°Es una cara!" üòä</p>
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="prevSection()">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="nextSection()">Siguiente: ¬°Lo lograste! üéâ</button>
            </div>
        </div>
        
        <!-- Secci√≥n 6: Conclusi√≥n -->
        <div class="section" id="section6">
            <h2>üéâ ¬°Felicitaciones, Expert@ en Redes Neuronales!</h2>
            
            <div class="explanation-box" style="text-align: center;">
                <h3>üèÜ Lo que aprendiste hoy:</h3>
                <p>‚úÖ Qu√© es una neurona artificial (¬°como un amigo inteligente!)</p>
                <p>‚úÖ C√≥mo ayudan a Juan con sus empanadas</p>
                <p>‚úÖ C√≥mo aprenden con ejemplos (backpropagation)</p>
                <p>‚úÖ C√≥mo trabajan muchas neuronas juntas</p>
                <p>‚úÖ C√≥mo reconocen patrones como caras</p>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <div style="font-size: 4em; margin: 20px 0;">üß†ü§ñ‚ú®</div>
                <h3>¬°Las redes neuronales est√°n en todas partes!</h3>
                <p>üì± En tu tel√©fono (reconociendo tu voz)</p>
                <p>üéµ En Spotify (recomendando m√∫sica)</p>
                <p>üöó En los autos inteligentes</p>
                <p>üè• Ayudando a los doctores</p>
                <p>üéÆ En los videojuegos</p>
            </div>
            
            <div class="controls">
                <h3>üéÆ ¬°Sigue explorando!</h3>
                <button class="btn" onclick="goToSection(1)">üîÑ Volver al inicio</button>
                <button class="btn" onclick="goToSection(2)">ü•ü Jugar con Juan</button>
                <button class="btn" onclick="goToSection(5)">üé® Dibujar m√°s caras</button>
            </div>
            
            <div class="explanation-box">
                <p style="text-align: center;"><strong>¬øSab√≠as que...?</strong></p>
                <p>ü§Ø Una red neuronal puede tener millones de neuronas artificiales</p>
                <p>‚ö° Aprenden s√∫per r√°pido con miles de ejemplos</p>
                <p>üéØ Cada d√≠a se vuelven m√°s inteligentes</p>
                <p>üöÄ ¬°T√∫ podr√≠as crear la pr√≥xima gran red neuronal!</p>
            </div>
        </div>
    </div>
    
    <script>
        let currentSection = 1;
        const maxSections = 6;
        let trainingStep = 0;
        let isDrawing = false;
        let canvas, ctx;
        
        // Inicializaci√≥n
        window.addEventListener('load', function() {
            canvas = document.getElementById('drawCanvas');
            if (canvas) {
                ctx = canvas.getContext('2d');
                setupCanvas();
            }
            updateEmpanada();
        });
        
        // Navegaci√≥n entre secciones
        function nextSection() {
            if (currentSection < maxSections) {
                document.getElementById(`section${currentSection}`).classList.remove('active');
                currentSection++;
                document.getElementById(`section${currentSection}`).classList.add('active');
            }
        }
        
        function prevSection() {
            if (currentSection > 1) {
                document.getElementById(`section${currentSection}`).classList.remove('active');
                currentSection--;
                document.getElementById(`section${currentSection}`).classList.add('active');
            }
        }
        
        function goToSection(section) {
            document.getElementById(`section${currentSection}`).classList.remove('active');
            currentSection = section;
            document.getElementById(`section${currentSection}`).classList.add('active');
        }
        
        // Funcionalidad de la primera neurona
        function activateNeuron(inputId) {
            // Activar conexi√≥n
            const connections = ['conn1', 'conn2', 'conn3'];
            connections.forEach(conn => {
                document.getElementById(conn).classList.remove('active', 'strong');
            });
            
            const connIndex = inputId === 'input1' ? 0 : inputId === 'input2' ? 1 : 2;
            const connection = document.getElementById(connections[connIndex]);
            connection.classList.add('active', 'strong');
            
            // Activar neurona principal
            const mainNeuron = document.getElementById('mainNeuron');
            mainNeuron.classList.add('active');
            
            // Activar salida despu√©s de un delay
            setTimeout(() => {
                document.getElementById('outputConn').classList.add('active', 'strong');
                const outputNeuron = document.getElementById('outputNeuron');
                outputNeuron.classList.add('active');
                outputNeuron.textContent = ['‚òÄÔ∏è', 'üïê', 'üìç'][connIndex] + '‚úì';
            }, 500);
            
            // Reset despu√©s de 2 segundos
            setTimeout(() => {
                document.querySelectorAll('.neuron').forEach(n => n.classList.remove('active'));
                document.querySelectorAll('.connection').forEach(c => c.classList.remove('active', 'strong'));
                document.getElementById('outputNeuron').textContent = '‚ùì';
            }, 2000);
        }
        
        // Funcionalidad del vendedor de empanadas
        function updateEmpanada() {
            const meat = parseInt(document.getElementById('meat').value);
            const cheese = parseInt(document.getElementById('cheese').value);
            const zone = parseInt(document.getElementById('zone').value);
            
            // Actualizar valores mostrados
            document.getElementById('meatValue').textContent = meat;
            document.getElementById('cheeseValue').textContent = cheese;
            
            let zoneText = '';
            if (zone <= 3) zoneText = zone + ' - Zona Popular';
            else if (zone <= 7) zoneText = zone + ' - Zona Media';
            else zoneText = zone + ' - Zona Exclusiva';
            document.getElementById('zoneValue').textContent = zoneText;
            
            // Calcular precio (f√≥rmula simple)
            const basePrice = 1000;
            const price = basePrice + (meat * 200) + (cheese * 150) + (zone * 100);
            
            // Actualizar visual de neuronas
            const meatNeuron = document.getElementById('meatNeuron');
            const cheeseNeuron = document.getElementById('cheeseNeuron');
            const zoneNeuron = document.getElementById('zoneNeuron');
            
            meatNeuron.style.opacity = 0.3 + (meat / 10) * 0.7;
            cheeseNeuron.style.opacity = 0.3 + (cheese / 10) * 0.7;
            zoneNeuron.style.opacity = 0.3 + (zone / 10) * 0.7;
            
            // Actualizar conexiones
            const connections = ['meatConn', 'cheeseConn', 'zoneConn'];
            const values = [meat, cheese, zone];
            
            connections.forEach((connId, index) => {
                const conn = document.getElementById(connId);
                if (values[index] > 6) {
                    conn.classList.add('strong');
                    conn.classList.remove('weak');
                } else if (values[index] < 4) {
                    conn.classList.add('weak');
                    conn.classList.remove('strong');
                } else {
                    conn.classList.remove('strong', 'weak');
                }
            });
            
            // Mostrar resultado
            document.getElementById('empanadaResult').innerHTML = 
                `üí∞ Precio sugerido: ${price.toLocaleString()} pesos`;
        }
        
        // Funcionalidad de entrenamiento
        let currentTrainingStep = 0;
        const trainingData = [
            { meat: 8, cheese: 6, zone: 9, correctPrice: 4000 },
            { meat: 3, cheese: 2, zone: 2, correctPrice: 1800 },
            { meat: 6, cheese: 5, zone: 5, correctPrice: 2800 },
            { meat: 9, cheese: 8, zone: 10, correctPrice: 4500 },
            { meat: 4, cheese: 3, zone: 3, correctPrice: 2200 }
        ];
        
        function trainStep() {
            if (currentTrainingStep >= trainingData.length) {
                document.getElementById('trainBtn').textContent = 'üéâ ¬°Entrenamiento Completado!';
                document.getElementById('trainBtn').disabled = true;
                document.getElementById('progressText').textContent = '100% - ¬°Juan ya es un experto!';
                return;
            }
            
            const example = trainingData[currentTrainingStep];
            const basePrice = 1000;
            const aiGuess = basePrice + (example.meat * 200) + (example.cheese * 150) + (example.zone * 100);
            const error = aiGuess - example.correctPrice;
            
            // Actualizar display
            document.getElementById('trainingExample').innerHTML = 
                `<strong>Ejemplo ${currentTrainingStep + 1}:</strong> Carne: ${example.meat}, Queso: ${example.cheese}, Zona: ${example.zone} ‚Üí Precio correcto: ${example.correctPrice.toLocaleString()}`;
            
            document.getElementById('juanGuess').textContent = `${aiGuess.toLocaleString()}`;
            document.getElementById('error').textContent = error > 0 ? `+${error.toLocaleString()}` : `${error.toLocaleString()}`;
            document.getElementById('error').style.color = error === 0 ? '#00FF00' : '#FF6B6B';
            
            // Actualizar progreso
            currentTrainingStep++;
            const progress = (currentTrainingStep / trainingData.length) * 100;
            document.getElementById('learningProgress').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '%';
            
            if (currentTrainingStep >= trainingData.length) {
                setTimeout(() => {
                    document.getElementById('trainBtn').textContent = 'üéâ ¬°Entrenamiento Completado!';
                    document.getElementById('trainBtn').disabled = true;
                    document.getElementById('progressText').textContent = '100% - ¬°Juan ya es un experto!';
                }, 1000);
            }
        }
        
        // Funcionalidad de red neuronal completa
        function demonstrateNetwork() {
            const hiddenNeurons = document.querySelectorAll('.hidden-neuron');
            const outputNeuron = document.querySelector('.output-neuron');
            const networkBtn = document.getElementById('networkBtn');
            
            networkBtn.textContent = 'üîÑ Procesando...';
            networkBtn.disabled = true;
            
            // Activar neuronas por capas
            setTimeout(() => {
                hiddenNeurons.forEach((neuron, index) => {
                    setTimeout(() => {
                        neuron.classList.add('active');
                    }, index * 200);
                });
            }, 500);
            
            setTimeout(() => {
                outputNeuron.classList.add('active');
                networkBtn.textContent = '‚ú® ¬°Red Activada!';
            }, 2000);
            
            // Reset
            setTimeout(() => {
                document.querySelectorAll('.neuron').forEach(n => n.classList.remove('active'));
                networkBtn.textContent = 'üöÄ ¬°Ver la red en acci√≥n!';
                networkBtn.disabled = false;
            }, 4000);
        }
        
        // Funcionalidad del canvas para dibujar caras
        function setupCanvas() {
            if (!canvas || !ctx) return;
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            
            // Event listeners para dibujar
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events para m√≥viles
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.beginPath();
            ctx.moveTo(x, y);
        }
        
        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.lineTo(x, y);
            ctx.stroke();
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }
        
        function clearCanvas() {
            if (!ctx) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('recognitionResult').textContent = 
                'ü§ñ Dibuja una cara y presiona "¬°Reconocer!" para ver qu√© piensa la red neuronal';
            document.getElementById('faceResult').textContent = '‚ùì';
            document.querySelectorAll('.face-detector').forEach(n => n.classList.remove('active'));
        }
        
        function recognizeFace() {
            if (!ctx) return;
            
            // Analizar el canvas (simulaci√≥n simple)
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            let hasDrawing = false;
            for (let i = 3; i < data.length; i += 4) {
                if (data[i] > 0) {
                    hasDrawing = true;
                    break;
                }
            }
            
            if (!hasDrawing) {
                document.getElementById('recognitionResult').innerHTML = 
                    'ü§î ¬°No veo nada! Dibuja algo primero.';
                return;
            }
            
            // Simular reconocimiento
            const detectors = document.querySelectorAll('.face-detector');
            const resultNeuron = document.getElementById('faceResult');
            
            // Activar detectores uno por uno
            detectors.forEach((detector, index) => {
                setTimeout(() => {
                    detector.classList.add('active');
                }, index * 500);
            });
            
            // Resultado final
            setTimeout(() => {
                const isFace = Math.random() > 0.3; // 70% chance de reconocer como cara
                
                if (isFace) {
                    resultNeuron.textContent = 'üòä';
                    resultNeuron.classList.add('active');
                    document.getElementById('recognitionResult').innerHTML = 
                        'üéâ ¬°Genial! La red neuronal dice: "¬°Es una cara!" üòä<br>¬°Detect√≥ formas redondas y l√≠neas que parecen ojos y boca!';
                } else {
                    resultNeuron.textContent = 'ü§î';
                    document.getElementById('recognitionResult').innerHTML = 
                        'ü§î Hmm... La red neuronal no est√° segura si es una cara.<br>¬°Intenta dibujar dos c√≠rculos para los ojos y una l√≠nea para la boca!';
                }
                
                // Activar conexiones
                document.getElementById('faceConn1').classList.add('active', 'strong');
                document.getElementById('faceConn2').classList.add('active', 'strong');
            }, 2000);
            
            // Reset visual despu√©s de 5 segundos
            setTimeout(() => {
                detectors.forEach(d => d.classList.remove('active'));
                resultNeuron.classList.remove('active');
                document.querySelectorAll('#faceConn1, #faceConn2').forEach(c => 
                    c.classList.remove('active', 'strong'));
            }, 7000);
        }
        
        // Funcionalidad de activaci√≥n de red para secci√≥n 4
        function activateNetwork(type) {
            const inputNeurons = document.querySelectorAll('.neuron-visual .layer:first-child .neuron');
            const hiddenNeurons = document.querySelectorAll('.hidden-neuron');
            const outputNeuron = document.querySelector('.output-neuron');
            
            // Activar neuronas de entrada
            inputNeurons.forEach(neuron => neuron.classList.add('active'));
            
            // Activar capas ocultas progresivamente
            setTimeout(() => {
                hiddenNeurons.forEach((neuron, index) => {
                    setTimeout(() => {
                        neuron.classList.add('active');
                    }, index * 100);
                });
            }, 300);
            
            // Activar salida
            setTimeout(() => {
                outputNeuron.classList.add('active');
            }, 1500);
            
            // Reset
            setTimeout(() => {
                document.querySelectorAll('.neuron').forEach(n => n.classList.remove('active'));
            }, 3000);
        }
    </script>
</body>
</html>
